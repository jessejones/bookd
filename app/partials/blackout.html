<div class="blackout-edit" ng-show="mode === 'edit'">

  <!-- the control panel: brand, tool selection, preview, and clear -->
  <div class="l-tiles l-tiles--tools">
    <h1 class="tile tile--brand">
      <span class="hidden-label">Baku</span>
    </h1>
    <button class="icon-marker tile tile--tool {{ tool.kind === 'marker' ? 'tile--is-active' : '' }}" title="marker" ng-click="setToolType('marker')">
      <span class="hidden-label">marker</span>
    </button>
    <button class="icon-eraser tile tile--tool {{ tool.kind === 'eraser' ? 'tile--is-active' : '' }}" title="eraser" ng-click="setToolType('eraser')">
      <span class="hidden-label">eraser</span>
    </button>
    <div class="l-sizes drawer drawer--closed">
      <button class="tile tile--size {{ tool.size === 5 ? 'tile--is-active' : '' }}" ng-click="setToolSize(5)">
        <div class="size-dot size-dot--5 size-dot--{{ tool.size === 5 ? tool.kind +'--active' : tool.kind }}"></div>
        <span class="hidden-label">small</span>
      </button><button class="tile tile--size {{ tool.size === 15 ? 'tile--is-active' : '' }}" ng-click="setToolSize(15)">
        <div class="size-dot size-dot--15 size-dot--{{ tool.size === 15 ? tool.kind +'--active' : tool.kind }}"></div>
        <span class="hidden-label">medium</span>
      </button><button class="tile tile--size {{ tool.size === 25 ? 'tile--is-active' : '' }}" ng-click="setToolSize(25)">
        <div class="size-dot size-dot--25 size-dot--{{ tool.size === 25 ? tool.kind +'--active' : tool.kind }}"></div>
        <span class="hidden-label">large</span>
      </button><button class="tile tile--size" title="size">
        <div class="size-dot size-dot--{{tool.kind}} size-dot--{{tool.size}}"></div>
        size
      </button>
    </div>
    <div class="l-tiles l-tiles--edit">
      <button class="icon-eye tile tile--edit" title="preview" ng-click="save()">
        <span class="hidden-label">preview</span>
      </button>
      <button class="icon-ccw tile tile--edit" title="clear" ng-click="clear()">
        <span class="hidden-label">clear</span>
      </button>
    </div>
  </div>

  <div class="l-workarea">
    <img ng-if="!source" class="loading" src="/img/loading.gif" alt="loading">

    <div ng-if="source" class="info info--source inverse">
      currently <a href="http://newspaperblackout.com/">blacking out</a> {{ source.author + '’s'}}
      <h2 class="source-title">
        <a ng-href="http://worldcatlibraries.org/registry/gateway?isbn={{ source.isbn }}">
          {{ source.title }}
          <span class="icon-link"></span>
        </a>
      </h2>
      <div class="text-right">
        <button class="btn--link" ng-click="startNew()">change text</button>
      </div>
    </div>
    <div class="blackout-board">
      <div class="blackout-frame"></div>
      <div class="blackout-source" ng-bind-html="source.content"></div>
      <canvas class="blackout-canvas" width="{{ dimensions.width }}" height="{{ dimensions.height }}"></canvas>
    </div>
  </div>
</div>

<div class="blackout-save" ng-show="mode === 'save'">
  <div class="l-tiles l-tiles--preview">
    <button class="tile tile--preview icon-back" title="edit" ng-click="edit()">
      <span class="hidden-label">keep editing</span>
    </button>
    <button class="tile tile--preview icon-plus3" title="new" ng-click="startNew()">
      <span class="hidden-label">start new</span>
    </button>
  </div>

  <div class="l-workarea">
    <div class="info info--preview inverse">
      If you’re happy with your poem, save the image below. And if you’re <em>really</em> happy with it,
      <a href="http://baku-poems.tumblr.com/submit">share your creation</a> on the <a href="http://baku-poems.tumblr.com/">Baku Poems Tumblr</a>. You can also <a href="http://baku-poems.tumblr.com/ask">give us your feedback</a>.
    </div>

    <img class="blackout-image" ng-src="{{ blackoutImage }}">
  </div>
</div>